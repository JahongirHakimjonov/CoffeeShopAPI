Техническое задание

Проект: Coffee Shop API — блок управления пользователями

Цель:

Реализовать полноценный функционал управления пользователями, включая регистрацию, авторизацию, аутентификацию и верификацию. Описать структуру проекта. Архитектура проекта должна быть расширяемая, production ready.



Функциональные требования

1. Регистрация пользователей

Реализовать эндпоинт для регистрации нового пользователя:

Email
Пароль
Имя, фамилия (опционально)
Проверка уникальности email.
После регистрации пользователь получает статус "не верифицирован".


2. Аутентификация и авторизация

Использовать JWT (access и refresh токены).

Эндпоинты:

POST /auth/signup — регистрация
POST /auth/login — авторизация (выдача токенов)
POST /auth/refresh — обновление access-токена

3. Верификация

Реализовать верификацию email или SMS:

После регистрации генерируется код или ссылка для подтверждения (можно фиктивно выводить в консоль).
Эндпоинт POST /auth/verify — подтверждение верификации.
После успешной верификации пользователь получает статус "верифицирован".



4. Автоматическая очистка

Пользователи, которые не прошли верификацию в течение 2 дней, должны автоматически удаляться.
Нужно реализовать через Celery или описать планируемую логику в README.


5. Роли пользователей

Две роли:

User — стандартный пользователь
Admin — доступ к расширенному функционалу


Реализовать ограничение доступа к эндпоинтам согласно ролям.


6. Эндпоинты управления пользователями

GET /me — получить текущего пользователя
GET /users — список пользователей (только для админа)
GET /users/{id} — получить пользователя по ID (только для админа)
PATCH /users/{id} — обновление данных пользователя (частично)
DELETE /users/{id} — удаление пользователя (только для админа)


Нефункциональные требования

Использовать FastAPI.
Асинхронная архитектура.
ORM: SQLAlchemy
База данных: PostgreSQL или SQLite.
Контейнеризация: Docker, Dockerfile и docker-compose.yml.
Документация эндпоинтов: OpenAPI (Swagger UI).
Все комментарии и описание на английском языке.


Дополнительно

Проект должен быть размещён в публичном репозитории GitHub.
Допускается использование сторонних библиотек (например, для отправки email/SMS, генерации JWT и т.д.).
Все эндпоинты должны иметь читаемые summary и description на английском языке.
В README описать инструкции по запуску и архитектуру модуля.
Если вы сознательно упрощаете какие-то части реализации, добавьте комментарий в коде, поясняющий, как бы вы реализовали этот функционал при наличии большего количества времени
